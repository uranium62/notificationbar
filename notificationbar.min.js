!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.NotificationBar=b()}(this,function(){"use strict";function g(b){if(!b||!b.Text)throw"Wrong messages format";b.Id||(b.Id=h()),b.Type||(b.Type=e.Info),b.CreateOn||(b.CreateOn=(new Date).toISOString()),b.Percent||(b.Percent=1),b.uid=k(),b.ttl=a.config.ttl,b.tms=j(b.CreateOn)}function h(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function i(a,b){var c=0;for(c=0;c<a.length;c++)if(a[c].Id===b.Id)return c;return c}function j(a){var b=new Date(a);return b.getHours()+":"+("0"+b.getMinutes()).substr(-2)}function k(){var a="_"+Math.random().toString(36).substr(2,9);return a}function l(b){var c=a.config,d="";return b===e.Info?d=c.info:b===e.Progress?d=c.progress:b===e.Error&&(d=c.error),d}function m(a,b){var c=a;return c=c.replace(/Text|Percent|tms/gi,function(a){return b[a]})}function n(c,d){var e=a.queue.length,g=a.config.onChange,h="";return g(c,d,e),d===f.Remove?void o(b,c.uid):d===f.Update?void p(b,c.uid,c.Percent):d===f.Add?(h=l(c.Type),h=m(h,c),void q(b,c.uid,h)):void 0}function o(a,b){var c=a.querySelector("#"+b);c&&a.removeChild(c)}function p(a,b,c){var d=a.querySelector("#"+b+" progress");d&&d.setAttribute("value",c)}function q(a,b,c){var d=document.createElement("li");d.setAttribute("id",b),d.innerHTML=c,a.insertBefore(d,a.childNodes[0])}var a={};a.version="0.1.0";var b=null,c={max:6,ttl:6e4,parent:"nb",onChange:function(a,b,c){},info:'<p><i class="fa fa-check ui-nb-ic ui-nb-ic-info"></i> Text </p><p class="ui-nb-tm"> tms </p>',progress:'<p><i class="fa fa-check ui-nb-ic ui-nb-ic-prog"></i> Text </p><progress class="ui-nb-prog" max="1" value="Percent"></progress><p class="ui-nb-tm"> tms </p>',error:'<p><i class="fa fa-times ui-nb-ic ui-nb-ic-erro"></i> Text </p><p class="ui-nb-tm"> tms </p>'};a.config=c,a.configure=function(a){var b,d;for(b in a)d=a[b],void 0!==d&&a.hasOwnProperty(b)&&(c[b]=d);return this};var d={On:0,Off:1};a.status=d.Off,a.on=function(){if(b=document.getElementById(a.config.parent))return a.status=d.On,this;throw"Couldn't find parent"},a.off=function(){return a.status=d.Off,this};var e={Info:0,Progress:1,Error:2},f={Add:0,Remove:1,Update:2};return a.queue=[],a.add=function(b){if(a.status!==d.Off){g(b);var c=a.queue,e=a.config.max,h=i(c,b),j=c[h];return j?(b.uid=j.uid,c[h]=b,void(j.Percent<=b.Percent&&n(b,f.Update))):(c.length>=e&&(j=c.shift(),n(j,f.Remove)),c.push(b),n(b,f.Add),this)}},a});